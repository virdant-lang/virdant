mod Top {
    incoming inp : Word[8];
    outgoing out : Word[8];

    master port mem of Mem;

    mod foo of Foo;
}

mod Foo {
    incoming inp : Word[8];
    outgoing out : Word[8];

    slave port mem of Mem;

    out := inp;
}

port Mem {
    mosi addr : Word[16];
    miso data : Word[8];
}
